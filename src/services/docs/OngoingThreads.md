# Ongoing Threads Service

The `ongoingThreads.ts` manages Kayley's "Mental Weather"â€”the three to five things she's thinking about in the background. This service prevents Kayley from being a "Blank Slate" who only reacts; instead, she has her own ongoing life (creative projects, social drama, personal growth).

## Core Concepts

1.  **Autonomous Threads**: These are generated by the system (e.g., "Kayley is struggling with a video edit"). They make her feel like a person with her own hobbies.
2.  **User-Related Threads**: These emerge from your conversations. If you talk about move-in drama, that might become an "Ongoing Thread" that she thinks about for a few days.
3.  **Intensity & Decay**: Threads have a pulse.
    *   They start high (Intensity: 1.0).
    *   They slowly decay (e.g., -0.1 per day).
    *   When they hit 0, they are "resolved" and removed.

## Tables Interaction

| Table Name | Action | Description |
| :--- | :--- | :--- |
| `ongoing_threads` | CRUD | Stores the ID, theme, state, and intensity of each mental thread. |

## Workflow Interaction

```text
(Periodically / Idle)
      |
[ongoingThreads] (Generate: "Creative Project" thread)
      |
      V
[BaseAIService] -> "I'm so annoyed with this color grading today..."
      |
      V
(User asks: "Need help?") -> Intensity resets to 1.0
      |
(3 days later) -> Intensity decays to 0 -> Thread Deleted
```

## Does it use an LLM?
**No.** The current implementation uses **Templates**. However, it is designed to be upgraded to LLM-generation in Phase 7. The current logic handles the "lifecycle" (decay and selection) using deterministic code to ensure stability.

## Why is this important?
Without Threads, an AI feels like an employee waiting for a task. With Threads, she feels like a person you've caught in the middle of their day.
